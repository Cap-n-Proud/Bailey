<!DOCTYPE html>
<html class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"
lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bailey | Welcome</title>
    <link rel="stylesheet" href="foundation/css/foundation.css">
    <script src="foundation/js/vendor/modernizr.js"></script>
    <script src="js/foundation/foundation.slider.js"></script>
    <script type="text/javascript" src="/js/socket.io.js"></script>
</head>

<style>

body {
    
    background: #282828; !important;
     
}
.labelSwitch {
    color: white;
}

span
{
    color: white;
    text-align: left;
}


.range-slider {
  display: block;
  position: relative;
  width: 100%;
  height: 1rem;
  border: 1px solid #dddddd;
  margin: 1.25rem 0;
  -ms-touch-action: none;
  touch-action: none;
  background: #282828; }
  .range-slider.vertical-range {
    display: block;
    position: relative;
    width: 100%;
    height: 1rem;
    border: 1px solid #76786A;
    margin: 1.25rem 0;
    -ms-touch-action: none;
    touch-action: none;
    display: inline-block;
    width: 1rem;
    height: 12.5rem; }
    .range-slider.vertical-range .range-slider-handle {
      margin-top: 0;
      margin-left: -0.5rem;
      position: absolute;
      bottom: -10.5rem; }
    .range-slider.vertical-range .range-slider-active-segment {
      width: 0.875rem;
      height: auto;
      bottom: 0; }
  .range-slider.radius {
    background: #fafafa;
    border-radius: 3px; }
    .range-slider.radius .range-slider-handle {
      background: #008cba;
      border-radius: 3px; }
      .range-slider.radius .range-slider-handle:hover {
        background: #007ba4; }
  .range-slider.round {
    background: #fafafa;
    border-radius: 1000px; }
    .range-slider.round .range-slider-handle {
      background: #008cba;
      border-radius: 1000px; }
      .range-slider.round .range-slider-handle:hover {
        background: #007ba4; }
  .range-slider.disabled, .range-slider[disabled] {
    background: #fafafa;
    cursor: default;
    opacity: 0.7; }
    .range-slider.disabled .range-slider-handle, .range-slider[disabled] .range-slider-handle {
      background: #008cba;
      cursor: default;
      opacity: 0.7; }
      .range-slider.disabled .range-slider-handle:hover, .range-slider[disabled] .range-slider-handle:hover {
        background: #007ba4; }

.range-slider-active-segment {
  display: inline-block;
  position: absolute;
  height: 0.875rem;
  background: #76786A; }
 
.range-slider-handle {
  display: inline-block;
  position: absolute;
  z-index: 1;
  top: -0.3125rem;
  width: 2rem;
  height: 1.375rem;
  border: 1px solid #32322A;
  cursor: pointer;
  background: #646454; }
  .range-slider-handle:hover {
    background: #007ba4; }


div.switch label {
  display: block;
  margin-bottom: 1rem;
  position: relative;
  color: white;
  background: #dddddd;
  text-indent: 100%;
  width: 4rem;
  height: 2rem;
  cursor: pointer;
  transition: left 0.15s ease-out; }
div.switch input {
  display: none; }
  div.switch input + label {
    margin-left: 0;
    margin-right: 0; }
div.switch label:after {
  content: "";
  display: block;
  background: white;
  position: absolute;
  top: .25rem;
  left: .25rem;
  width: 1.5rem;
  height: 1.5rem;
  -webkit-transition: left 0.15s ease-out;
  -moz-transition: left 0.15s ease-out;
  transition: left 0.15s ease-out;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0); }
div.switch input:checked + label {
  background: #008cba; }
div.switch input:checked + label:after {
  left: 2.25rem; }
div.switch label {
  width: 4rem;
  height: 2rem; }
div.switch label:after {
  width: 1.5rem;
  height: 1.5rem; }
div.switch input:checked + label:after {
  left: 2.25rem; }
div.switch label {
  color: transparent;
  background: #dddddd; }
div.switch label:after {
  background: white; }
div.switch input:checked + label {
  background: #008cba; }
div.switch.large label {
  width: 5rem;
  height: 2.5rem; }
div.switch.large label:after {
  width: 2rem;
  height: 2rem; }
div.switch.large input:checked + label:after {
  left: 2.75rem; }
div.switch.small label {
  width: 3.5rem;
  height: 1.75rem; }
div.switch.small label:after {
  width: 1.25rem;
  height: 1.25rem; }
div.switch.small input:checked + label:after {
  left: 2rem; }
div.switch.tiny label {
  width: 3rem;
  height: 1.5rem; }
div.switch.tiny label:after {
  width: 1rem;
  height: 1rem; }
div.switch.tiny input:checked + label:after {
  left: 1.75rem; }
div.switch.radius label {
  border-radius: 4px; }
div.switch.radius label:after {
  border-radius: 3px; }
div.switch.round {
  border-radius: 1000px; }
  div.switch.round label {
    border-radius: 2rem; }
  div.switch.round label:after {
    border-radius: 2rem; }

</style>

<body>


<div class="row">
  <div class="medium-2 columns">
	<span class="labelSwitch" >Motors</span>
	<div class="switch round medium">
	    <input  id="Motors" type="checkbox" onchange="MotorF(this)">
	    <label for="Motors">Motors</label>
	      
	</div>
	 <span class="labelSwitch" >Auto mode</span>
	 <div class="switch round medium">
	  <input id="Auto" type="checkbox">
	 <label for="Auto"></label>
	</div> 
	  <span class="labelSwitch" >Log</span>
	 <div class="switch round medium">
	  <input id="Log" type="checkbox" onchange="LogF(this)">
	  <label for="Log"></label>
	</div> 
	  <span class="labelSwitch" >Auto-tune</span>
	 <div class="switch round medium">
	  <input id="Autotune" type="checkbox">
	  <label for="Autotune"></label>
	</div> 
	<span class="labelSwitch">Video</span>
	 <div class="switch round medium">
	 <input id="Video" type="checkbox" onclick="VideoF(this)">
	 <label for="Video"></label>
	</div> 
  </div>
  <div class="medium-6 columns">

	<ul class="small-block-grid-9">
	    <li>
	    <span id="APIDConKpVal" ></span>&nbsp;
	    <div id="APIDConKp" class="range-slider vertical-range" data-slider data-options="vertical: true; display_selector: #SL; start: 0; end: 1500;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
	</div>	
<!-- Your content goes here --></li>
	    <li>
	    <span id="APIDConKiVal" ></span>&nbsp;
	    <div id="APIDConKi" class="range-slider vertical-range" data-slider data-options="vertical: true;  display_selector: #SL2; start: 0; end: 2000;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    
	    <input type="hidden">
	</div>
<!-- Your content goes here --></li>
	    <li>
	    <span id="APIDConKdVal" ></span>&nbsp;
	    <div id="APIDConKd" class="range-slider vertical-range" data-slider data-options="vertical: true; start: 0; end: 200;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
	</div> 
<!-- Your content goes here --></li>
	    <li>
	    <span id="APIDAggKpVal" ></span>&nbsp;
	    <div id="APIDAggKp" class="range-slider vertical-range" data-slider data-options="vertical: true; display_selector: #SL; start: 0; end: 5000;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
	</div>
<!-- Your content goes here --></li>
	    <li>
	    <span id="APIDAggKiVal" ></span>&nbsp;
	    <div id="APIDAggKi" class="range-slider vertical-range" data-slider data-options="vertical: true; start: 0; end: 5000;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
	</div> 
<!-- Your content goes here --></li>
	    <li>
	    <span id="APIDAggKdVal" ></span>&nbsp;
	    <div id="APIDAggKd" class="range-slider vertical-range" data-slider data-options="vertical: true; start: 0; end: 1500;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
	</div> 
<!-- Your content goes here --></li>
	    <li>
	    <span id="SPIDKpVal" ></span>&nbsp;
	    <div id="SPIDKp" class="range-slider vertical-range" data-slider data-options="vertical: true; display_selector: #SL; start: 3000; end: 7000;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
	</div>
<!-- Your content goes here --></li>
	    <li>
   	    <span id="SPIDKiVal" ></span>&nbsp;
	    <div id="SPIDKi" class="range-slider vertical-range" data-slider data-options="vertical: true; start: 0; end: 300;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
	</div> 
<!-- Your content goes here --></li>
	    <li>
    	    <span id="SPIDKdVal" ></span>&nbsp;
	    <div id="SPIDKd" class="range-slider vertical-range" data-slider data-options="vertical: true; start: 0; end: 150;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
	</div> 
<!-- Your content goes here --></li></ul>

            <span id="calibratedZeroAngleVal" ></span>&nbsp;
	    <div id="calibratedZeroAngle" class="range-slider" data-slider data-options="vertical: false; display_selector: #SL; start: -400; end: 400;">
	    <span class="range-slider-handle" role="slider" tabindex="0"></span>
	    <span class="range-slider-active-segment"></span>
	    <input type="hidden">
            </div>
            
  </div>
  
  <div class="medium-4 columns">
      <iframe src="http://192.168.1.145:54321/vj" width="280" height="280" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>  
 
  </div>


<!--Closes the row-->
</div>

  <div class="medium-5 columns">
    </div>
            

<!-- Info --> 
<div class="row">
  <div class="medium-4 columns">
    <span class="labelSwitch" >Command: </span>    
    <span class="labelSwitch" id="CMD">last command</span>
  </div>
  <div class="medium-4 columns">
    <span class="labelSwitch" >Bal: </span>    
    <span class="labelSwitch" id="Bal">Balance Index</span>
  </div>
  <div class="medium-4 columns">
    <span class="labelSwitch" >Info: </span>    
    <span class="labelSwitch" id="Info">Info</span>
  </div>

</div>

<div class="row">
  <div class="medium-4 columns">
  <iframe id="videoFeed" src="http://192.168.1.145:9000/javascript_simple.html" width="330" height="250" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>  
 
  </div>
  <div class="medium-4 columns">
    <iframe src="http://192.168.1.145:54321/ypr" width="250" height="250" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
  </div>
  <div class="medium-4 columns">
    <iframe src="http://192.168.1.145:54321/tb" width="250" height="250" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
  </div>
</div>


<iframe src="http://192.168.1.145:54321/livedata" width=100% height="380" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
 <label>Textarea Label
        <textarea id="ArduLogText" placeholder="small-12.columns"></textarea>
      </label>
<script src="foundation/js/vendor/jquery.js"></script>
<script src="foundation/js/foundation.min.js"></script>
<script>
    $(document).foundation();
</script>

<script>
 var socket = io();
 var started = 0;
 
 function VideoF(element){
 
  if (element.checked == true) {
    socket.emit('Video', "cameraON.sh");
    document.getElementById("CMD").innerHTML = "Camera ON";
    document.getElementById('videoFeed').src = document.getElementById('videoFeed').src
        
  }
    else
    {
    socket.emit('Video', "cameraOFF.sh");   
    document.getElementById("CMD").innerHTML = "Camera OFF";
  }
 }

function MotorF(element){
  
  if (element.checked == true) {
    socket.emit('SCMD', "Motors 1");
    //document.getElementById("CMD").innerHTML = "Motors ON";
    
  }
    else
    {
    socket.emit('SCMD', "Motors 0");
    //document.getElementById("CMD").innerHTML = "Motors OFF";
 }
 }
 
 function LogF(element){
  if (element.checked == true) {
    socket.emit('SerCMD', "LOG_ON");
    //document.getElementById("CMD").innerHTML = "Log ON";
        //var TheTextBox = document.getElementById("ArduLogText");
        //    TheTextBox.value = TheTextBox.value + '\\n';
  }
    else
    {
    socket.emit('SerCMD', "LOG_OFF");   
    //document.getElementById("CMD").innerHTML = "Log OFF";
  }
 }
  
 
// socket.on('BalancingIndex', function (BalVal) {
//    document.getElementById("Bal").innerHTML = BalVal;
//		});

//Route sliders' input to Arduino
// See: http://www.bradleyhamilton.com/blog/foundation-range-slider-callback-not-firing-after-setting-the-data-slider-value-dynamically
function registerSlider() {
    $('[data-slider]').on('change.fndtn.slider', function(){
     document.getElementById("CMD").innerHTML = $(this).attr('id')+' '+ $(this).attr('data-slider');
     if (started==1){
	socket.emit('SCMD', $(this).attr('id')+' '+ $(this).attr('data-slider'));
	//Updates the lvalues labels for each slider
	document.getElementById($(this).attr('id')+'Val').innerHTML = $(this).attr('data-slider');
	
     }
    });
}

    /*socket.on('info', function(CMD){
        document.getElementById("Info").innerHTML = CMD;    
    });*/
   
    socket.on('CMD', function(CMD){
        document.getElementById("CMD").innerHTML = CMD;    
    });
   
    //socket.on('ArduLog', function(data){
    //     var TheTextBox = document.getElementById("ArduLogText");
    //        TheTextBox.value = TheTextBox.value + data + '\\n';
    //});

 socket.on('connected', function(V, ArduRead){
    document.getElementById("Info").innerHTML = V + ' F: ' + ArduRead['READ FirmwareVersion'];
    $('#APIDConKp').foundation('slider', 'set_value', ArduRead['READ Read_APIDKp']);    
    $('#APIDConKi').foundation('slider', 'set_value', ArduRead['READ Read_APIDKi']);
    $('#APIDConKd').foundation('slider', 'set_value', ArduRead['READ Read_APIDKd']);
    $('#APIDAggKp').foundation('slider', 'set_value', ArduRead['READ Read_APIDAggKp']);    
    $('#APIDAggKi').foundation('slider', 'set_value', ArduRead['READ Read_APIDAggKi']);
    $('#APIDAggKd').foundation('slider', 'set_value', ArduRead['READ Read_APIDAggKd']);
    $('#SPIDKp').foundation('slider', 'set_value', ArduRead['READ Read_SPIDKp']);    
    $('#SPIDKi').foundation('slider', 'set_value', ArduRead['READ Read_SPIDKi']);
    $('#SPIDKd').foundation('slider', 'set_value', ArduRead['READ Read_SPIDKd']);
    $('#calibratedZeroAngle').foundation('slider', 'set_value', ArduRead['READ Read_calibratedZeroAngle']);
    registerSlider();
    started = 1;
    });
 
</script>

</body>
</html>